<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="John Doe">





<title>嵌入式系统 | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
            <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


        
    


<meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Bentham&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Bentham&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">嵌入式系统</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">John Doe</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">September 4, 2023&nbsp;&nbsp;10:12:44</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">课程笔记</a>
                            
                                <a href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F/">嵌入式系统</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="1-嵌入式系统概要"><a href="#1-嵌入式系统概要" class="headerlink" title="1.嵌入式系统概要"></a>1.嵌入式系统概要</h1><p>计算机发展三大阶段</p>
<ol>
<li>研究大型机</li>
<li>个人计算机PC</li>
<li>后PC时代（becoming an old fashion）</li>
</ol>
<p>术语演化</p>
<ol>
<li>泛在计算（任何时间任何地点都在算）</li>
<li>不可见计算机（计算机被集成到物件）</li>
<li>普适计算（计算设备进入日常生活）Bill Gates提出</li>
<li>环境智能（未来家庭、智能楼宇）</li>
</ol>
<h3 id="嵌入式系统定义"><a href="#嵌入式系统定义" class="headerlink" title="嵌入式系统定义"></a>嵌入式系统定义</h3><p><strong>IEEE：</strong>用于控制、监视或辅助操作机器和设备的装置</p>
<p><strong>国内：</strong>以应用为中心，以计算机技术为基础，软硬件可裁剪，适用于应用系统对功能、可靠性、成本、体积、功耗有严格要求的专用计算机系统（一个具有特定功能或用途的隐藏在某种设备中的计算机软硬件集合体，没有固定的特征形状）</p>
<p><strong>老师喜欢：</strong>包含计算机，但又不是通用计算机</p>
<p>不单单指嵌入到某个设备，也可以是被嵌入到某个过程</p>
<h3 id="嵌入式系统三要素"><a href="#嵌入式系统三要素" class="headerlink" title="嵌入式系统三要素"></a>嵌入式系统三要素</h3><ol>
<li>嵌入性：嵌入到对象体系，有对象环境要求</li>
<li>专用性：软硬件按对象进行裁剪</li>
<li>计算机</li>
</ol>
<h3 id="CPS-信息物理系统-Cyber-Physical-System"><a href="#CPS-信息物理系统-Cyber-Physical-System" class="headerlink" title="CPS 信息物理系统 Cyber-Physical System"></a>CPS 信息物理系统 Cyber-Physical System</h3><ol>
<li>嵌入式和物理学深度融合</li>
</ol>
<h3 id="通信的重要性"><a href="#通信的重要性" class="headerlink" title="通信的重要性"></a>通信的重要性</h3><h4 id="无线感知网络-wireless-sensor-network"><a href="#无线感知网络-wireless-sensor-network" class="headerlink" title="无线感知网络-wireless sensor network"></a>无线感知网络-wireless sensor network</h4><p>许多空间中分布的自动装置组成的无线通信计算网络，使用传感器协作监控不同位置的物理或环境状况</p>
<h4 id="IOT-物联网-Internet-of-Things"><a href="#IOT-物联网-Internet-of-Things" class="headerlink" title="IOT 物联网 Internet of Things"></a>IOT 物联网 Internet of Things</h4><p>比上面那个功能强多了，智能化识别、定位、跟踪、监控和管理</p>
<p>物联网技术开发被称作工业4.0</p>
<h1 id="2-导论"><a href="#2-导论" class="headerlink" title="2.导论"></a>2.导论</h1><h2 id="嵌入式系统的组成"><a href="#嵌入式系统的组成" class="headerlink" title="嵌入式系统的组成"></a>嵌入式系统的组成</h2><ol>
<li>一般由嵌入式硬件和软件组成</li>
<li>硬件以微处理器为核心集成存储器和系统专用的输入输出设备</li>
<li>软件包括：初始化代码及驱动、嵌入式操作系统和应用程序等</li>
</ol>
<p>ROS 集成操作系统</p>
<p>OTA 空中下载技术</p>
<h1 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h1><h2 id="处理器和处理器体系结构类型多"><a href="#处理器和处理器体系结构类型多" class="headerlink" title="处理器和处理器体系结构类型多"></a>处理器和处理器体系结构类型多</h2><h2 id="关注成本"><a href="#关注成本" class="headerlink" title="关注成本"></a>关注成本</h2><p>最重要的成本是系统成本</p>
<p>成本主要包括:</p>
<ol>
<li>一次性开发成本</li>
<li>硬件BOM，外壳包装，软件版税</li>
<li>批量产品的总体成本=NRE成本+每个产品成本*产品总量</li>
<li>每个产品最后的成本=总体成本/产品总量=NRE成本/产品总量+每个产品成本</li>
</ol>
<h2 id="实时性和可靠性的要求"><a href="#实时性和可靠性的要求" class="headerlink" title="实时性和可靠性的要求"></a>实时性和可靠性的要求</h2><ol>
<li>大多数实时系统都是嵌入式系统</li>
<li>多数嵌入式系统有实时性要求</li>
<li>嵌入式系统要求有出错处理和快速启动的功能</li>
<li>大多数嵌入式系统的软件一般都包括一些机制，比如硬件看门狗计时器，软件的内存保护和重启动机制</li>
</ol>
<h2 id="适应多种处理器、可裁剪、轻量型、实时可靠、可固化的嵌入式操作系统"><a href="#适应多种处理器、可裁剪、轻量型、实时可靠、可固化的嵌入式操作系统" class="headerlink" title="适应多种处理器、可裁剪、轻量型、实时可靠、可固化的嵌入式操作系统"></a>适应多种处理器、可裁剪、轻量型、实时可靠、可固化的嵌入式操作系统</h2><ol>
<li>由于嵌入式操作系统的特点，嵌入式操作系统多种多样</li>
<li>大多数商业嵌入式操作系统可同时支持不同种类的嵌入式微处理器。可根据应用的情况进行剪裁、配置</li>
<li>嵌入式操作系统规模小，所需的资源有限如内核规模在几十KB，能与应用软件一样固化运行</li>
<li>一个实时内核，一般采用基于优先级的可抢占的调度算法（为了满足实时要求）</li>
<li>可靠</li>
</ol>
<h3 id="旧的交叉开发工具已经不那么流行了"><a href="#旧的交叉开发工具已经不那么流行了" class="headerlink" title="旧的交叉开发工具已经不那么流行了"></a>旧的交叉开发工具已经不那么流行了</h3><h2 id="嵌入式系统的分类"><a href="#嵌入式系统的分类" class="headerlink" title="嵌入式系统的分类"></a>嵌入式系统的分类</h2><ol>
<li>按嵌入式处理器的位数来分类<ul>
<li>四位</li>
<li>八位</li>
<li>十六</li>
<li>32</li>
<li>64</li>
</ul>
</li>
<li>按应用来分类</li>
<li>按速度<ul>
<li>强实时系统</li>
<li>一般实时系统</li>
<li>弱实时系统</li>
</ul>
</li>
<li>按确定性分类<ul>
<li>硬实时：系统响应时间不能得到满足，系统就会寄掉</li>
<li>软实时：不满足也不会寄掉</li>
<li>准实时：两个之间，偏向于软实时</li>
</ul>
</li>
<li>按照嵌入式软件的复杂程度分类<ul>
<li>循环轮询系统</li>
<li>有限状态机系统</li>
<li>前后台系统</li>
<li>单处理器</li>
</ul>
</li>
</ol>
<h2 id="发展趋势"><a href="#发展趋势" class="headerlink" title="发展趋势"></a>发展趋势</h2><ul>
<li>嵌入式人工智能</li>
<li>安全<ul>
<li>以往的安全策略，由于嵌入式设备不具备通用计算性，可能不可用</li>
<li>设备接入公网后漏洞百出</li>
</ul>
</li>
<li>不断增加的计算需求</li>
<li>互连的需求</li>
<li>灵活性需求</li>
<li>软硬件协同设计</li>
<li>更高集成度</li>
<li>IP重用</li>
<li>设计方法的多样性</li>
<li>云、边缘计算（云边端计算）</li>
</ul>
<h1 id="4-嵌入式系统设计"><a href="#4-嵌入式系统设计" class="headerlink" title="4.嵌入式系统设计"></a>4.嵌入式系统设计</h1><h2 id="嵌入式系统面临的挑战"><a href="#嵌入式系统面临的挑战" class="headerlink" title="嵌入式系统面临的挑战"></a>嵌入式系统面临的挑战</h2><ol>
<li>需要多少硬件？</li>
<li>如何满足时限要求，如何处理多项功能在时间协调上的一致关系？</li>
<li>如何降低系统功耗？</li>
<li>如何保证系统可升级？</li>
<li>如何保证系统可靠的工作？</li>
</ol>
<h2 id="嵌入式系统设计者要求"><a href="#嵌入式系统设计者要求" class="headerlink" title="嵌入式系统设计者要求"></a>嵌入式系统设计者要求</h2><ul>
<li>懂得整个系统架构</li>
<li>详细了解硬件的细节</li>
<li>详细了解硬件的细节</li>
<li>软件设计满足<ul>
<li>实时要求</li>
<li>低功耗</li>
<li>代码量小</li>
</ul>
</li>
<li>详细了解领域知识</li>
</ul>
<h2 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h2><ul>
<li>成本</li>
<li>性能</li>
<li>功耗</li>
<li>尺寸</li>
<li>可伸缩性和可重用性</li>
<li>容错</li>
<li>…</li>
</ul>
<h2 id="体系结构设计"><a href="#体系结构设计" class="headerlink" title="体系结构设计"></a>体系结构设计</h2><ul>
<li>主要组件</li>
<li>硬件软件</li>
</ul>
<h2 id="软硬件划分"><a href="#软硬件划分" class="headerlink" title="软硬件划分"></a>软硬件划分</h2><ul>
<li>嵌入式系统的设计涉及硬件和软件，设计中必须决定什么功能由硬件实现，什么功能由软件实现</li>
<li>硬件和软件具有双重性（有很多问题既能用硬件实现，也能用软件实现）<ul>
<li>算法<ul>
<li>加密解密</li>
<li>编码解码</li>
<li>压缩解压</li>
<li>…</li>
</ul>
</li>
<li>数学运算<ul>
<li>浮点运算,FFT,…</li>
<li>…</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="软硬件技术对系统结构的影响"><a href="#软硬件技术对系统结构的影响" class="headerlink" title="软硬件技术对系统结构的影响"></a>软硬件技术对系统结构的影响</h2><ul>
<li>软硬件设计的趋势</li>
</ul>
<h2 id="嵌入式系统设计方法的演变"><a href="#嵌入式系统设计方法的演变" class="headerlink" title="嵌入式系统设计方法的演变"></a>嵌入式系统设计方法的演变</h2><ul>
<li>以PCB（印刷电路板）、CAD（电脑辅助设计）和在线仿真器为主要工具</li>
<li>EDA（电子设计自动化）和EOS（嵌入式操作系统）为开发平台</li>
<li>以IP（知识产权）内核库为设计基础，用软硬件协同设计技术的系统级设计方法</li>
</ul>
<h2 id="传统嵌入式系统的设计过程"><a href="#传统嵌入式系统的设计过程" class="headerlink" title="传统嵌入式系统的设计过程"></a>传统嵌入式系统的设计过程</h2><ul>
<li>基本特征<ul>
<li>系统已开始就被划分为软件和硬件两大部分</li>
<li>软件和硬件进行独立开发设计</li>
<li>硬件优先</li>
</ul>
</li>
<li>隐含的一些问题<ul>
<li>软硬件之间的交互收到很大限制<ul>
<li>凭经验划分软硬件</li>
<li>软硬件之间的相互性能很难评估</li>
</ul>
</li>
<li>系统集成相对滞后，NRE（一次性工程费用：开发新产品的单次成本）较大</li>
</ul>
</li>
<li>因此：<ul>
<li>设计质量差</li>
<li>设计修改准</li>
<li>研制周期不能有效保障</li>
</ul>
</li>
</ul>
<h2 id="软硬件协同设计HW-x2F-SW-Co-design"><a href="#软硬件协同设计HW-x2F-SW-Co-design" class="headerlink" title="软硬件协同设计HW/SW Co-design"></a>软硬件协同设计HW/SW Co-design</h2><ul>
<li>任务并发管理</li>
<li>高级的转换</li>
<li>设计空间探索</li>
<li>软硬件划分</li>
<li>编译、调度</li>
</ul>
<pre class="mermaid">stateDiagram
    behavior --&gt; SW: partitioning
    behavior --&gt; HW: partitioning
    SW --&gt; compilation
    HW --&gt; synthesis
    compilation --&gt; 验证方案
    synthesis --&gt; 验证方案</pre>

<h1 id="4-硬件部分"><a href="#4-硬件部分" class="headerlink" title="4.硬件部分"></a>4.硬件部分</h1><h2 id="硬件总览"><a href="#硬件总览" class="headerlink" title="硬件总览"></a>硬件总览</h2><ul>
<li>传感器：将非电信号转为电信号</li>
<li>A/D D/A converter：模拟信号与数字信号之间的转换</li>
<li>微控制器</li>
<li>展示</li>
<li>执行器 actuator</li>
<li>硬件平台<ul>
<li>cpu</li>
<li>bus</li>
<li>memory</li>
<li>I/O</li>
</ul>
</li>
</ul>
<h2 id="嵌入式微处理器"><a href="#嵌入式微处理器" class="headerlink" title="嵌入式微处理器"></a>嵌入式微处理器</h2><p>Embedded Microprocessor</p>
<h3 id="流行的微处理器指令集"><a href="#流行的微处理器指令集" class="headerlink" title="流行的微处理器指令集"></a>流行的微处理器指令集</h3><ol>
<li>ARM架构：<ul>
<li>ARM（Advanced RISC Machine）是一种精简指令集计算机（RISC）架构，最初由英国的ARM Holdings开发。它在移动设备（如智能手机和平板电脑）和嵌入式系统中得到广泛应用。</li>
<li>ARM架构具有较低的功耗和较高的能效，适合于便携式设备。它采用了三级流水线结构，具备较高的指令并行性，并且支持多核处理器。</li>
</ul>
</li>
<li>MIPS架构：<ul>
<li>MIPS（Microprocessor without Interlocked Pipeline Stages）是另一种RISC架构，最初由美国的MIPS Technologies开发。它在早期计算机和嵌入式系统中得到广泛应用。</li>
<li>MIPS架构以其简洁的设计和高性能而闻名。它采用了五级流水线结构，具备较低的指令延迟和高的指令并行性。MIPS架构在路由器、嵌入式控制系统和一些游戏机中得到广泛应用。</li>
</ul>
</li>
<li>PowerPC架构：<ul>
<li>PowerPC是由IBM、摩托罗拉（Motorola）和苹果（Apple）共同开发的RISC架构。它最初是为个人电脑和工作站设计的，但后来在游戏机和服务器领域也有广泛应用。</li>
<li>PowerPC架构在科学计算和高性能计算领域表现出色。它采用了乱序执行（Out-of-Order Execution）和超标量技术，具备较高的性能和并行处理能力。</li>
</ul>
</li>
<li>x86架构：<ul>
<li>x86架构是英特尔（Intel）和AMD等公司开发的复杂指令集计算机（CISC）架构，最初用于个人电脑。现如今，x86架构在桌面计算机、服务器和数据中心中占据主导地位。</li>
<li>x86架构具有广泛的软件支持和较高的兼容性。它采用了复杂的指令集，可以执行多种复杂的操作。x86架构的一些变种包括IA-32和x86-64（也称为AMD64或Intel 64），后者为64位扩展。</li>
</ul>
</li>
</ol>
<h3 id="RISC-vs-CISC"><a href="#RISC-vs-CISC" class="headerlink" title="RISC vs CISC"></a>RISC vs CISC</h3><p>精简 vs 复杂</p>
<p>RISC比较好做编译器优化</p>
<h3 id="RISC-V"><a href="#RISC-V" class="headerlink" title="RISC-V"></a>RISC-V</h3><ul>
<li>简单、完全开源且免费</li>
<li>基准指令和扩展指令分开，可以做定制化的模块和扩展</li>
<li>提供32、64、128位指令集</li>
</ul>
<h3 id="设计芯片需要考虑的五件事"><a href="#设计芯片需要考虑的五件事" class="headerlink" title="设计芯片需要考虑的五件事"></a>设计芯片需要考虑的五件事</h3><ul>
<li>成本</li>
<li>生态系统</li>
<li>碎片化风险</li>
<li>安全性</li>
<li>设计保证</li>
</ul>
<h3 id="嵌入式微处理器-1"><a href="#嵌入式微处理器-1" class="headerlink" title="嵌入式微处理器"></a>嵌入式微处理器</h3><ul>
<li>种类繁多，按位数可分为4、8、16、32、64</li>
</ul>
<h3 id="嵌入式微处理单元（MPU）"><a href="#嵌入式微处理单元（MPU）" class="headerlink" title="嵌入式微处理单元（MPU）"></a>嵌入式微处理单元（MPU）</h3><ul>
<li>嵌入式微处理器就是和通用式计算机处理器对应的cpu<ul>
<li>功能和微处理器基本一样</li>
<li>体积小、功耗少、可靠性高</li>
<li>有的可提供工业级应用</li>
</ul>
</li>
</ul>
<h3 id="嵌入式微控制器（MCU）"><a href="#嵌入式微控制器（MCU）" class="headerlink" title="嵌入式微控制器（MCU）"></a>嵌入式微控制器（MCU）</h3><ul>
<li>嵌入式微处理器将整个计算机系统的主要硬件集成到一块芯片中，一块芯片内部就有了POM、EPOM、RAM、bus、Timer、I/O、串行口等各种必要功能和外设</li>
<li>特点<ul>
<li>一个系列，多种衍生</li>
<li>单片化，可靠，功耗低，便宜</li>
<li>主力军，份额50%</li>
<li>一般用于性能比较低的产品，比如洗衣机冰箱的嵌入式系统</li>
<li>一般是八位或十六位</li>
</ul>
</li>
</ul>
<h3 id="嵌入式DSP"><a href="#嵌入式DSP" class="headerlink" title="嵌入式DSP"></a>嵌入式DSP</h3><ul>
<li>嵌入式DSP是专门用于信号处理方面的处理器，其在系统结构和指令计算方面进行了特殊设计，具有很高的变异效率和指令执行速度</li>
<li>应用领域</li>
</ul>
<h3 id="嵌入式SoC"><a href="#嵌入式SoC" class="headerlink" title="嵌入式SoC"></a>嵌入式SoC</h3><ul>
<li>追求产品系统最大包容的集成器件，绝大多数系统构件都在一个芯片</li>
<li>SoC芯片可以有效降低电子信息系统产品开打的成本</li>
<li>典型：<ul>
<li>高通骁龙</li>
<li>海思</li>
</ul>
</li>
</ul>
<h3 id="嵌入式微处理器的特点"><a href="#嵌入式微处理器的特点" class="headerlink" title="嵌入式微处理器的特点"></a>嵌入式微处理器的特点</h3><ul>
<li>基础还是通用微处理器</li>
<li>与通用相比<ul>
<li>体积小重量轻可靠性高</li>
<li>功耗低</li>
<li>成本低</li>
<li>工作温度、抗电磁干扰，可靠性增强</li>
</ul>
</li>
</ul>
<h3 id="ARM公司"><a href="#ARM公司" class="headerlink" title="ARM公司"></a>ARM公司</h3><ul>
<li>成立于1990年11月</li>
<li>设计了ARM系列的RISC处理器内核</li>
<li>授权ARM核心设计的半导体合作伙伴制造和销售给他们的客户</li>
<li>同时开发技术以协助ARM架构设计</li>
</ul>
<h3 id="ARM架构"><a href="#ARM架构" class="headerlink" title="ARM架构"></a>ARM架构</h3><ul>
<li>典型的RISC架构<ul>
<li>丰富的寄存器</li>
<li>加载/存储体系结构</li>
<li>简单寻址模式</li>
<li>统一和固定长度的指令字段</li>
</ul>
</li>
</ul>
<h3 id="Meltdown-amp-Spectre"><a href="#Meltdown-amp-Spectre" class="headerlink" title="Meltdown & Spectre"></a>Meltdown &amp; Spectre</h3><p>与推测性执行和Cache有关的硬件级漏洞</p>
<p>cpu进行分支预测推测操作时提前执行了代码，并且将结果存在了cache里，结果分支清空时只清空了寄存器，没有清空cache，黑客可以利用cache中的结果进行越权操作</p>
<h3 id="选择微处理器"><a href="#选择微处理器" class="headerlink" title="选择微处理器"></a>选择微处理器</h3><ol>
<li>列出所需的硬件接口</li>
<li>检查软件架构</li>
<li>选择体系结构</li>
<li>确定内存需求</li>
<li>开始搜索微控制器</li>
<li>检查成本和功率限制</li>
<li>检查零件可用性</li>
<li>选择一个开发工具包</li>
<li>研究编译器和工具</li>
<li>开始尝试</li>
</ol>
<h3 id="存储器架构"><a href="#存储器架构" class="headerlink" title="存储器架构"></a>存储器架构</h3><ul>
<li>对许多应用来说，存储系统对整个系统性能的影响比对数据流水线的影响更大</li>
<li>复杂：<ul>
<li>在同一个嵌入式系统中，通常需要组合各种存储技术<ul>
<li>至少需要一些非易失和易失</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="易失性存储器"><a href="#易失性存储器" class="headerlink" title="易失性存储器"></a>易失性存储器</h4><p>SRAM DRAM</p>
<h4 id="非易失性存储器"><a href="#非易失性存储器" class="headerlink" title="非易失性存储器"></a>非易失性存储器</h4><p>disk，ROM，Mash ROM，EROM，EEROM，Flash</p>
<h4 id="固件firmware"><a href="#固件firmware" class="headerlink" title="固件firmware"></a>固件firmware</h4><p>一般存在EEPOM或Flash中，用户可以通过特定刷新程序来进行升级</p>
<p>ROMable 可固化</p>
<p>可以被编程到POM芯片中的机器语言</p>
<p>固件其实也是一种程序，是软件，只不过被固化到了ROM上</p>
<h4 id="Flash"><a href="#Flash" class="headerlink" title="Flash"></a>Flash</h4><p>比较快的读取时间，但是还是比RAM慢</p>
<p>写入时间大大超过读取时间，而且写入次数是有限的</p>
<h5 id="flash类型"><a href="#flash类型" class="headerlink" title="flash类型"></a>flash类型</h5><ul>
<li><p>NOR</p>
<ul>
<li>按快擦除</li>
<li>擦除和写入时间较长，但能够像RAM那样访问</li>
</ul>
</li>
<li><p>NAND</p>
<ul>
<li>以块为单位，一个数据块是数百或数千比特</li>
<li>擦除和写入速度比较快</li>
<li>按页读取（512-4K字节）</li>
</ul>
</li>
<li><p>主要应用对比</p>
</li>
<li><table>
<thead>
<tr>
<th>NAND</th>
<th>NOR</th>
</tr>
</thead>
<tbody><tr>
<td>文件存储</td>
<td>代码执行</td>
</tr>
<tr>
<td>存储容量高</td>
<td>低</td>
</tr>
<tr>
<td>成本低</td>
<td>高</td>
</tr>
<tr>
<td>动态功耗低</td>
<td>高</td>
</tr>
<tr>
<td>待机功耗高</td>
<td>低</td>
</tr>
<tr>
<td>写入速度快</td>
<td>慢</td>
</tr>
<tr>
<td>读取速度慢</td>
<td>快</td>
</tr>
<tr>
<td>execute in Place（XIP）就地执行（芯片内执行，不用拷到RAM中）不支持</td>
<td>支持</td>
</tr>
<tr>
<td>可靠性低</td>
<td>高</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="存储器层次结构"><a href="#存储器层次结构" class="headerlink" title="存储器层次结构"></a>存储器层次结构</h3><ol>
<li>寄存器</li>
<li>spm</li>
<li>cache</li>
<li>内存</li>
<li>外存/互联网存储器</li>
</ol>
<h4 id="Cache之于ES"><a href="#Cache之于ES" class="headerlink" title="Cache之于ES"></a>Cache之于ES</h4><p>cache的加入导致了访问时间的不可预测，对嵌入式系统的可靠性和实时性能产生负面影响</p>
<h4 id="SPM暂存存储器"><a href="#SPM暂存存储器" class="headerlink" title="SPM暂存存储器"></a>SPM暂存存储器</h4><p>比cache功耗低，速度快，和处理器集成在一个芯片上</p>
<h4 id="存储器访问时间难以预测"><a href="#存储器访问时间难以预测" class="headerlink" title="存储器访问时间难以预测"></a>存储器访问时间难以预测</h4><p>虚拟存储器MMU，使各种存储技术看起来是一个连续的地址空间</p>
<p>地址转换TLB</p>
<h2 id="总线式嵌入式系统"><a href="#总线式嵌入式系统" class="headerlink" title="总线式嵌入式系统"></a>总线式嵌入式系统</h2><h3 id="访问存储"><a href="#访问存储" class="headerlink" title="访问存储"></a>访问存储</h3><ul>
<li>独立I/O和内存空间<ol>
<li>I/O不占用内存</li>
<li>使用I/O指令，程序清晰</li>
<li>译码电路比较简单</li>
<li>只能用专门的I/O指令，访问的方式比较少</li>
</ol>
</li>
<li>内存映射I/O<ol>
<li>使用同一方式寻址，可以用C语言直接编写</li>
<li>不需要额外的保护机制</li>
<li>缓存设备控制器可能影响I/O设备的使用，一般需要专门的逻辑设置缓存禁用</li>
<li>如果只有一个地址空间，内存模块和I/O设备必须检查所有的内存引用，以决定要响应哪一个</li>
</ol>
</li>
<li>混合方案</li>
</ul>
<h2 id="嵌入式系统"><a href="#嵌入式系统" class="headerlink" title="嵌入式系统"></a>嵌入式系统</h2><h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><p>所有递归函数都必须是可重入的</p>
<p>在嵌入式系统中尽量避免使用递归，递归调用栈带来的内存开销很可能是致命的</p>
<h3 id="异步硬件-x2F-固件"><a href="#异步硬件-x2F-固件" class="headerlink" title="异步硬件/固件"></a>异步硬件/固件</h3><h3 id="竞态条件"><a href="#竞态条件" class="headerlink" title="竞态条件"></a>竞态条件</h3><p>设备或系统出现不恰当的执行顺序，从而得到不正确的结果</p>
<p>解决：</p>
<ol>
<li>把导致竞态的服务禁用</li>
<li>乐观锁</li>
<li>悲观锁</li>
</ol>
<h3 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h3><h4 id="总线复用"><a href="#总线复用" class="headerlink" title="总线复用"></a>总线复用</h4><h4 id="多总线机制"><a href="#多总线机制" class="headerlink" title="多总线机制"></a>多总线机制</h4><p>一根高速总线，一根低速总线，中间桥接一下</p>
<h4 id="常用的总线"><a href="#常用的总线" class="headerlink" title="常用的总线"></a>常用的总线</h4><p>UART（经济、简单，功能有限）、CAN（安全快速，很复杂）、USB（适用于即插即用的硬件，需要强大的主机、需要指定驱动）、SPI（快速、低成本，无即插即用硬件）、IC</p>
<h2 id="嵌入式软件系统概述"><a href="#嵌入式软件系统概述" class="headerlink" title="嵌入式软件系统概述"></a>嵌入式软件系统概述</h2><h3 id="与桌面软件的区别"><a href="#与桌面软件的区别" class="headerlink" title="与桌面软件的区别"></a>与桌面软件的区别</h3><ul>
<li><p>内存十分有限</p>
</li>
<li><p>cpu能力十分保守</p>
</li>
<li><p>操作系统 </p>
</li>
<li><p>实时行为</p>
</li>
<li><p>开发工具</p>
<ul>
<li>es使用交叉编译器</li>
<li>往往在开发中嵌入一些汇编代码</li>
</ul>
</li>
<li><p>软件组件</p>
<ul>
<li>库，这些库必须是适合es环境的，比如c++的STL库有一些就不适合es环境</li>
</ul>
</li>
</ul>
<h3 id="软件、硬件的权衡"><a href="#软件、硬件的权衡" class="headerlink" title="软件、硬件的权衡"></a>软件、硬件的权衡</h3><ul>
<li>微处理器</li>
<li>内存大小组合（调试的时候能用ram别用rom）</li>
<li>需认真考虑设计中包含哪些外设<ul>
<li>需要重点考虑硬件费用</li>
<li>有时可用软件替代</li>
</ul>
</li>
</ul>
<h3 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h3><ul>
<li>在线仿真器ICE<ul>
<li>模拟CPU的功能</li>
<li>价格昂贵</li>
</ul>
</li>
<li>监控调试器<ul>
<li>需要通信通道</li>
<li>占用系统资源</li>
</ul>
</li>
<li>片上调试<ul>
<li>JTAG是边界扫描的一个标准协议</li>
<li>价格便宜，易于实现</li>
<li>广泛使用</li>
</ul>
</li>
</ul>
<h3 id="自检"><a href="#自检" class="headerlink" title="自检"></a>自检</h3><ul>
<li>IO电路</li>
<li>板载开关</li>
<li>状态显示</li>
</ul>
<h3 id="单线程模型"><a href="#单线程模型" class="headerlink" title="单线程模型"></a>单线程模型</h3><ul>
<li>优点<ul>
<li>编程再编程简单</li>
<li>改变系统响应特性的同时</li>
</ul>
</li>
</ul>
<h3 id="多任务模型"><a href="#多任务模型" class="headerlink" title="多任务模型"></a>多任务模型</h3><ul>
<li>优点<ul>
<li>允许将系统工作划分为几个逻辑阶段</li>
</ul>
</li>
</ul>
<h2 id="ROS"><a href="#ROS" class="headerlink" title="ROS"></a>ROS</h2><ul>
<li><p>ROS是一个适用于机器人的开源操作系统</p>
</li>
<li><p>提供了操作系统应有的服务，包括硬件抽象、底层设备、常用函数、进程间消息的传递</p>
</li>
<li><p>提供用于获取、编译、编写和跨计算机</p>
</li>
</ul>
<h3 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h3><ul>
<li><p>ROS的核心是提供一个消息传递系统</p>
</li>
<li><p>通过匿名发布/订阅模式管理分布式节点之间的通信细节</p>
</li>
<li><p>这种方法鼓励软件开发中的良好实践</p>
</li>
</ul>
<h2 id="嵌入式软件设计模式"><a href="#嵌入式软件设计模式" class="headerlink" title="嵌入式软件设计模式"></a>嵌入式软件设计模式</h2><ul>
<li>两部分<ul>
<li>业务逻辑</li>
<li>实时依赖硬件的逻辑</li>
</ul>
</li>
<li>抽象层将所需操作的高级请求转换为操作所需的低级命令</li>
</ul>
<h3 id="非结构化单体架构"><a href="#非结构化单体架构" class="headerlink" title="非结构化单体架构"></a>非结构化单体架构</h3><ul>
<li>很容易构建，但很难维持规模和移植</li>
<li>与应用层的应用程序紧密耦合</li>
</ul>
<h3 id="事件驱动架构"><a href="#事件驱动架构" class="headerlink" title="事件驱动架构"></a>事件驱动架构</h3><h3 id="微服务架构"><a href="#微服务架构" class="headerlink" title="微服务架构"></a>微服务架构</h3><h3 id="微内核架构"><a href="#微内核架构" class="headerlink" title="微内核架构"></a>微内核架构</h3><h3 id="故障恢复机制：看门狗"><a href="#故障恢复机制：看门狗" class="headerlink" title="故障恢复机制：看门狗"></a>故障恢复机制：看门狗</h3><p>一个计数器，每来一个时钟脉冲+1，一旦计数器溢出，就reset MCU，造成恢复</p>
<p>为了避免触发恢复，我们要“喂狗”，重置看门狗的计数器</p>
<h3 id="线性数据"><a href="#线性数据" class="headerlink" title="线性数据"></a>线性数据</h3><p>中断服务器直接访问，需要由锁保护起来，避免竞态条件</p>
<h2 id="RTOS应用程序设计模式"><a href="#RTOS应用程序设计模式" class="headerlink" title="RTOS应用程序设计模式"></a>RTOS应用程序设计模式</h2><p>RTOS程序通常有两种同步：</p>
<ul>
<li>资源同步：共享资源的访问是否安全</li>
<li>活动同步：决定执行是否已达到特定状态</li>
</ul>
<h3 id="资源同步"><a href="#资源同步" class="headerlink" title="资源同步"></a>资源同步</h3><h4 id="中断锁定"><a href="#中断锁定" class="headerlink" title="中断锁定"></a>中断锁定</h4><h4 id="抢占锁"><a href="#抢占锁" class="headerlink" title="抢占锁"></a>抢占锁</h4><p>当两个任务都在访问时，最先访问的任务抢到锁</p>
<p>在临界期内核抢占锁会被禁用，可能导致高优先级的任务无法执行</p>
<h4 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h4><p>保护共享资源的最安全、最推荐的方法之一是使用互斥锁。互斥锁通 过创建一个对象来保护临界区，该对象的状态可以被检查，以确定是 否可以安全访问共享资源，其唯一目的是为共享资源提供互斥</p>
<p>互斥锁不会禁用中断，它不会禁用内核的抢占调度程序</p>
<p>保护共享资源的互斥锁的一个潜在问题是，开发人员需要知道它的存在</p>
<h3 id="活动同步"><a href="#活动同步" class="headerlink" title="活动同步"></a>活动同步</h3><p>关于协调任务执行</p>
<h4 id="单向同步"><a href="#单向同步" class="headerlink" title="单向同步"></a>单向同步</h4><h4 id="双向同步"><a href="#双向同步" class="headerlink" title="双向同步"></a>双向同步</h4><h4 id="广播设计模式"><a href="#广播设计模式" class="headerlink" title="广播设计模式"></a>广播设计模式</h4><h4 id="发布和订阅模型（在ES中广泛使用）"><a href="#发布和订阅模型（在ES中广泛使用）" class="headerlink" title="发布和订阅模型（在ES中广泛使用）"></a>发布和订阅模型（在ES中广泛使用）</h4><p>发布者向特定的主题发布消息，订阅这个主题的接受者收到这类消息</p>
<p>系统完全可扩展</p>
<h4 id="低功耗设计模式"><a href="#低功耗设计模式" class="headerlink" title="低功耗设计模式"></a>低功耗设计模式</h4><p>尽可能保持设备关闭</p>
<h4 id="多核架构"><a href="#多核架构" class="headerlink" title="多核架构"></a>多核架构</h4><ul>
<li><p>同构多核</p>
</li>
<li><p>异构多核</p>
<p>比如可以一块内核用于机器学习推理，一块内核用于标准实时运算</p>
</li>
</ul>
<h2 id="ROS-入门"><a href="#ROS-入门" class="headerlink" title="ROS 入门"></a>ROS 入门</h2><h3 id="节点-Nodes"><a href="#节点-Nodes" class="headerlink" title="节点 Nodes"></a>节点 Nodes</h3><p>单一用途的可执行程序，比如传感器驱动、地图构建、规划、UI</p>
<p>单独编译、执行和管理</p>
<p>使用ROS客户端库编写节点</p>
<ul>
<li>roscpp</li>
<li>python</li>
</ul>
<p>节点可以发布或订阅topic</p>
<p>节点也可以通过或使用服务/行动</p>
<h3 id="节点管理器Master"><a href="#节点管理器Master" class="headerlink" title="节点管理器Master"></a>节点管理器Master</h3><p>为节点提供链接信息，以便各节点之间互通消息</p>
<p>跟踪和记录主题/服务通讯，辅助节点相互查找、建立连接</p>
<p>提供参数服务器，节点使用此服务存储和检索运行时的参数</p>
<p>唤醒参数ROS_MASTER_URL包含ROS Master的ip和port</p>
<p><em>节点管理器是违背分布式理论的，在ROS2中已经被剔除</em></p>
<h3 id="ROS主题"><a href="#ROS主题" class="headerlink" title="ROS主题"></a>ROS主题</h3><p>已定义类型的命名消息流</p>
<p>可对名为scan的主题发送来自测距仪的数据，消息类型为LaserScan</p>
<h3 id="ROS消息"><a href="#ROS消息" class="headerlink" title="ROS消息"></a>ROS消息</h3><p>消息：用于节点间通信的严格类型的数据结构</p>
<p>.msg是带有字段类型和名称的简单文本文件，编程语言无关</p>
<p>使用geometry_msgs/Twist表示速度命令</p>
<p>支持一般的数据结构</p>
<h3 id="ROS服务"><a href="#ROS服务" class="headerlink" title="ROS服务"></a>ROS服务</h3><p>同步节点事务</p>
<p>客户机/服务器模型</p>
<p>使用编程语言无关的.srv文件定义请求和应答数据结构</p>
<p>服务角色</p>
<ul>
<li>远程计算</li>
<li>出发行为</li>
<li>检索</li>
</ul>
<h3 id="动作action"><a href="#动作action" class="headerlink" title="动作action"></a>动作action</h3><ul>
<li>与服务类似，动作客户端向动作服务器发送请求，在执行动作时，动作服务器会向动作客户端发送进度反馈消息</li>
<li>动作时异步的<ul>
<li>ROS1 动作借助主题完成信息交换</li>
<li>ROS2 可以使用服务</li>
</ul>
</li>
</ul>
<h3 id="ROS-Bags"><a href="#ROS-Bags" class="headerlink" title="ROS Bags"></a>ROS Bags</h3><p>ROS数据记录的主要机制，用于存储来自topics和services的metadata</p>
<h3 id="ROS-package"><a href="#ROS-package" class="headerlink" title="ROS package"></a>ROS package</h3><ul>
<li>ROS中的软件以包的形式组织</li>
<li>包的目标是创建易于重用的最小代码集合</li>
<li>一个包包含一个或多个节点，文档，并提供ROS接口</li>
<li>大多数ROS包都托管在Github上</li>
</ul>
<h3 id="常用ROS命令"><a href="#常用ROS命令" class="headerlink" title="常用ROS命令"></a>常用ROS命令</h3><h4 id="ROSshell"><a href="#ROSshell" class="headerlink" title="ROSshell"></a>ROSshell</h4><p>用起来很像linux bash</p>
<ul>
<li>roscd</li>
<li>rosls</li>
<li>rosed</li>
<li>roscp</li>
<li>roscore</li>
<li>rosrun</li>
<li>roslunch</li>
<li>rosclean</li>
<li>rostopic</li>
<li>rosservice</li>
<li>rosnode</li>
<li>rosparam</li>
<li>rosbag</li>
<li>rosmsg</li>
<li>rossrv</li>
<li>rosversion</li>
<li>catkin_create_pkg</li>
<li>rosinstall</li>
<li>rosdep</li>
</ul>
<h2 id="m"><a href="#m" class="headerlink" title="m"></a>m</h2><h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><p>模型应该具有的一些特征：</p>
<ul>
<li>简单</li>
<li>经得起理论检验</li>
<li>高表现力</li>
<li>提供逻辑推理能力</li>
<li>可执行</li>
<li>可综合：通常要求设计正交性</li>
<li>能够适应各种不同的任务</li>
<li>描述不存在歧义，易于理解和修改</li>
</ul>
<p>常见的一些建模</p>
<ul>
<li>面向状态的建模</li>
<li>面向活动</li>
<li>面型结构</li>
<li>面向数据</li>
<li>异构模型</li>
</ul>
<h2 id="有限状态机"><a href="#有限状态机" class="headerlink" title="有限状态机"></a>有限状态机</h2><h3 id="反应式"><a href="#反应式" class="headerlink" title="反应式"></a>反应式</h3><h4 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h4><ul>
<li>其特征是事件驱动</li>
<li>可以定义为可能的io集合、条件、动作和时序约束</li>
</ul>
<h3 id="确定性FSM特性"><a href="#确定性FSM特性" class="headerlink" title="确定性FSM特性"></a>确定性FSM特性</h3><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="36.026ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 15923.5 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(989,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(1455,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g><g data-mml-node="msub" transform="translate(2027,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g></g><g data-mml-node="mi" transform="translate(2802.6,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(3163.6,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(3692.6,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(4053.6,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mo" transform="translate(4519.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(4964.3,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(5449.3,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(6021.3,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(6382.3,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(6885.3,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(7457.3,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(7818.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(8485.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(9540.9,0)"><path data-c="1D719" d="M409 688Q413 694 421 694H429H442Q448 688 448 686Q448 679 418 563Q411 535 404 504T392 458L388 442Q388 441 397 441T429 435T477 418Q521 397 550 357T579 260T548 151T471 65T374 11T279 -10H275L251 -105Q245 -128 238 -160Q230 -192 227 -198T215 -205H209Q189 -205 189 -198Q189 -193 211 -103L234 -11Q234 -10 226 -10Q221 -10 206 -8T161 6T107 36T62 89T43 171Q43 231 76 284T157 370T254 422T342 441Q347 441 348 445L378 567Q409 686 409 688ZM122 150Q122 116 134 91T167 53T203 35T237 27H244L337 404Q333 404 326 403T297 395T255 379T211 350T170 304Q152 276 137 237Q122 191 122 150ZM500 282Q500 320 484 347T444 385T405 400T381 404H378L332 217L284 29Q284 27 285 27Q293 27 317 33T357 47Q400 66 431 100T475 170T494 234T500 282Z"></path></g><g data-mml-node="mo" transform="translate(10136.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(10525.9,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mi" transform="translate(10994.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(11355.9,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mi" transform="translate(11884.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mi" transform="translate(12245.9,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mo" transform="translate(12711.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(13156.5,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(13622.5,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mi" transform="translate(14107.5,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(14573.5,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(15173.5,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(15534.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p>
<ul>
<li>确定性：对于每个状态，每个输入值仅可激活一个转移</li>
<li>可接受性：每个输入能能够被接受</li>
</ul>
<h3 id="Moore机和Mealy机"><a href="#Moore机和Mealy机" class="headerlink" title="Moore机和Mealy机"></a>Moore机和Mealy机</h3><p>moore机输出完全由当前状态决定，与输入信号的当前值无关，mealy机输出依赖于当前状态和当前输入，moore机结构简单但是装太多，mealy机复杂但是比较精简</p>
<h3 id="等价"><a href="#等价" class="headerlink" title="等价"></a>等价</h3><p>对所有输入具有相同输出的FSM等价，看起来结构完全不同的FSM都可能等价，因此有限状态机是可以优化的，主要是进行状态的缩减</p>
<h3 id="非确定性FSM"><a href="#非确定性FSM" class="headerlink" title="非确定性FSM"></a>非确定性FSM</h3><p>状态输出有多个值</p>
<p>NFA（非确定）可以通过幂集构造转变为DFA（确定）</p>
<h3 id="常规FSM"><a href="#常规FSM" class="headerlink" title="常规FSM"></a>常规FSM</h3><ul>
<li>经常过度指定<ul>
<li>完全指定的</li>
</ul>
</li>
<li>缺乏组合潜力，可伸缩性差<ul>
<li>状态爆炸</li>
</ul>
</li>
<li>不支持并发</li>
<li>一种解决方案是在模型中引入层次结构</li>
</ul>
<h3 id="层次FSM"><a href="#层次FSM" class="headerlink" title="层次FSM"></a>层次FSM</h3><p>支持并发</p>
<ul>
<li>当前状态：活跃态</li>
<li>包含其他状态：超状态</li>
<li>被包含：子状态</li>
<li>不包含其他状态：基本状态</li>
<li>包含基本状态的状态是这个基本状态的：祖先状态</li>
<li>任何时候若FSM只能处于超状态S的某个状态中，则该状态被称为OR型状态</li>
</ul>
<h4 id="默认状态机制"><a href="#默认状态机制" class="headerlink" title="默认状态机制"></a>默认状态机制</h4><p>超状态变为活跃时将要激活的状态</p>
<h4 id="历史机制"><a href="#历史机制" class="headerlink" title="历史机制"></a>历史机制</h4><p>采用这个机制，就可能回到超状态退出之前最后一个活跃子状态</p>
<p>也就是跳出去之后再调回来应该回到上次跳出去时候的状态</p>
<h4 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h4><p>与型超状态：无论什么时候包含状态S的系统在进入S状态时都将进入S的所有子状态中</p>
<p>相当于S里的子状态机在并发执行了</p>
<h3 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h3><h3 id="边的标号"><a href="#边的标号" class="headerlink" title="边的标号"></a>边的标号</h3><p>语法: event(引发迁移的事件)[condition(进行测试的条件)]/action(执行迁移所产生的输出)</p>
<p>off-key[msg==true]/on:=0</p>
<h3 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h3><ul>
<li>层次结构允许任意嵌套与型和或型超状态</li>
<li>语义足够详细</li>
<li>大量仿真工具</li>
<li>可以在后端自动生成C或者VHDL</li>
</ul>
<h3 id="不足"><a href="#不足" class="headerlink" title="不足"></a>不足</h3><ul>
<li>生成的玩意儿效率低下</li>
<li>难以生成分布式应用程序</li>
<li>没有结构化层次的描述</li>
</ul>
<h3 id="层次FSM特性"><a href="#层次FSM特性" class="headerlink" title="层次FSM特性"></a>层次FSM特性</h3><ul>
<li>合理的默认活动</li>
<li>多个地方增强行为</li>
<li>所需状态数减少</li>
<li>状态转移减少</li>
<li>易于扩展</li>
<li>更复杂，实现成本更高</li>
<li>要在表现力和复杂性和可维护性中平衡</li>
</ul>
<h2 id="实践课：AEB"><a href="#实践课：AEB" class="headerlink" title="实践课：AEB"></a>实践课：AEB</h2><h3 id="AEB需要的功能"><a href="#AEB需要的功能" class="headerlink" title="AEB需要的功能"></a>AEB需要的功能</h3><ul>
<li>碰撞预警与紧急制动</li>
<li>系统失效警告</li>
<li>驾驶员可中断</li>
<li>相邻车道不响应</li>
<li>面对低障碍物不应启动</li>
</ul>
<h2 id="嵌入式操作系统概论"><a href="#嵌入式操作系统概论" class="headerlink" title="嵌入式操作系统概论"></a>嵌入式操作系统概论</h2><h3 id="实时系统"><a href="#实时系统" class="headerlink" title="实时系统"></a>实时系统</h3><ul>
<li>一个实时系统是指计算的正确性不仅取决于程序的逻辑正确，也取决于得到结果的时间开销，如果时间要求得不到满足，也不能得到结果</li>
<li>黑话<ul>
<li>确定性</li>
<li>非确定性</li>
<li>截止时限</li>
</ul>
</li>
<li>硬实时：截止实现一旦错过就是失败</li>
<li>软实时：不是失败</li>
<li>准实时：不是失败，但是服务质量可能降低</li>
</ul>
<h3 id="实时操作系统"><a href="#实时操作系统" class="headerlink" title="实时操作系统"></a>实时操作系统</h3><p>支持构建实时系统的操作系统</p>
<p>只有实时操作系统和确定性代码同时满足才能产生实时性能</p>
<ul>
<li>多任务级别</li>
<li>软件和硬件资源管理</li>
<li>为应用提供基本的OS服务</li>
<li>从软件应用抽象硬件</li>
<li>嵌入式应用上下文具有更高可靠性</li>
<li>满足应用需要的裁剪能力</li>
<li>更快</li>
<li>减少内存需求</li>
<li>为实时嵌入式系统提供可裁剪的调度策略</li>
<li>支持无盘化嵌入式系统，可以从ROM或RAM上引导和运行</li>
<li>对不同硬件平台具有更好的可移植性</li>
</ul>
<p>RTOS关键要求</p>
<ul>
<li>操作系统的时间行为必须可预测<ul>
<li>任何调度策略必须是确定性的</li>
<li>为了避免关键事件处理过程中的不可预测的延迟，禁止中断的时间必须尽可能短</li>
</ul>
</li>
<li>操作系统必须管理线程和进程的调度</li>
<li>一些系统要求操作系统管理时间<ul>
<li>对时间的精度要求可能会有所不同</li>
<li>一些与环境的连接可用来获取精确的时间信息，如GPS或移动网络</li>
</ul>
</li>
<li>操作系统必须是快速的</li>
<li>可靠性</li>
<li>简介紧凑</li>
</ul>
<p>为什么使用RTOS</p>
<ul>
<li>可被复用的标准软件组件</li>
<li>灵活性</li>
<li>响应时间</li>
</ul>
<h3 id="RTOS类别"><a href="#RTOS类别" class="headerlink" title="RTOS类别"></a>RTOS类别</h3><ul>
<li>快速专有内核</li>
<li>对于标准操作系统的实时扩展<ul>
<li>通过比如RT_PREEMPT的内核补丁将Linux调度器改为完全可抢占</li>
<li>Xenomai：一个协同内核，会把Linux内核视作它的最低优先级任务</li>
<li>RTAI 协同内核的替代方案</li>
</ul>
</li>
</ul>
<p>标准操作系统实时扩展：</p>
<p>优点：</p>
<ul>
<li>有标准OS API</li>
<li>快速应用</li>
<li>非实时不会影响实时</li>
</ul>
<p>缺点：</p>
<ul>
<li>设备驱动存在冲突，一般将设备划分为由实时进程处理和由标准OS处理</li>
<li>实时进程还是不能用标准OS的服务</li>
</ul>
<h3 id="最流行的嵌入式操作系统"><a href="#最流行的嵌入式操作系统" class="headerlink" title="最流行的嵌入式操作系统"></a>最流行的嵌入式操作系统</h3><ol>
<li>Embedded Linux</li>
<li>FreeRTOS</li>
<li>Ubuntu</li>
</ol>
<h3 id="物联网操作系统"><a href="#物联网操作系统" class="headerlink" title="物联网操作系统"></a>物联网操作系统</h3><p>要求：</p>
<ul>
<li>内存占用小<ul>
<li>如下各方面需要正确的权衡<ul>
<li>性能</li>
<li>方便的API</li>
<li>操作系统内存占用小</li>
</ul>
</li>
</ul>
</li>
<li>支持异构硬件</li>
<li>网络连接<ul>
<li>有有线有无线</li>
</ul>
</li>
<li>节能<ul>
<li>很多物联网设备使用电池供电</li>
</ul>
</li>
<li>实时功能</li>
<li>安全</li>
</ul>
<h3 id="调度模型"><a href="#调度模型" class="headerlink" title="调度模型"></a>调度模型</h3><p>抢占式，非抢占式</p>
<h3 id="内存分配"><a href="#内存分配" class="headerlink" title="内存分配"></a>内存分配</h3><ul>
<li>内存以静态还是动态分配是一个重要问题</li>
<li>标准C的malloc是非确定性的，实时操作系统要为malloc提供一个确定性实现，比如TLSF</li>
<li>动态内存分配要处理内存不足的情况，很难处理</li>
<li>基于堆的malloc通常导致内存碎片</li>
</ul>
<h3 id="网络缓存管理"><a href="#网络缓存管理" class="headerlink" title="网络缓存管理"></a>网络缓存管理</h3><p>两种方式</p>
<ul>
<li>内存复制：从资源角度是昂贵的</li>
<li>不同网络层之间传递指针：会产生谁来负责分配的问题</li>
</ul>
<h3 id="编程语言"><a href="#编程语言" class="headerlink" title="编程语言"></a>编程语言</h3><p>主要选择</p>
<p>标准C与C++</p>
<h3 id="调试工具"><a href="#调试工具" class="headerlink" title="调试工具"></a>调试工具</h3><ul>
<li>GDB</li>
<li>为了运行实时调试系统，需要JTAG或Spy-Bi-Wire</li>
<li>用printf()简单调试</li>
<li>甚至直接用LED等闪烁</li>
</ul>
<h3 id="特征集"><a href="#特征集" class="headerlink" title="特征集"></a>特征集</h3><ul>
<li>操作系统可以分为内核和更高级别的功能</li>
</ul>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>测试挑战来源于这些系统的分布式特性，并且典型的嵌入式系统通常是受限的</p>
<h3 id="证书"><a href="#证书" class="headerlink" title="证书"></a>证书</h3><p>找认证机构搞一个证书来</p>
<h3 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h3><h3 id="调度程序"><a href="#调度程序" class="headerlink" title="调度程序"></a>调度程序</h3><ul>
<li>完全静态调度程序</li>
<li>静态顺序调度程序/离线调度程序</li>
<li>在线调度程序<ul>
<li>静态分配调度</li>
<li>完全动态调度</li>
</ul>
</li>
</ul>
<h3 id="任务模型"><a href="#任务模型" class="headerlink" title="任务模型"></a>任务模型</h3><h3 id="任务周期"><a href="#任务周期" class="headerlink" title="任务周期"></a>任务周期</h3><p>一个任务的每次执行被称为一个作业</p>
<h3 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h3><p>两个时间T：任务重新就绪的周期 C：任务执行需要的时间</p>
<p>可行调度：每个任务都在截止周期之内被完成</p>
<h4 id="RMS-单调速率调度"><a href="#RMS-单调速率调度" class="headerlink" title="RMS 单调速率调度"></a>RMS 单调速率调度</h4><p>RMS直接用周期来设定优先级，周期越短，优先级越高</p>
<p>只要一个任务集可以被静态调度，就可以被RMS调度</p>
<p>RMS CPU利用率，当n（任务数）趋近于无穷时，cpu利用率趋近于0.7</p>
<h5 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h5><ul>
<li>单处理系统中最优的固定优先级抢占式调度算法</li>
<li>静态优先级</li>
</ul>
<h4 id="临界时刻定理"><a href="#临界时刻定理" class="headerlink" title="临界时刻定理"></a>临界时刻定理</h4><p>对于固定优先级调度，如果任务T1与所有更⾼优先级 的任务同时释放，那么，每个任务 在单处理器系统上执⾏的响应时间就是最⼤化的 </p>
<p>当低优先级任务的开始相位与⾼优先 级任务的开始相位⼀致时，低优先级任务的完成时间是最差的 </p>
<p>因此，在检查调度可⾏性时，只考 虑最坏的情况就⾜够了，即所有的 任务同时开始周期式执⾏</p>
<h3 id="Jackson算法"><a href="#Jackson算法" class="headerlink" title="Jackson算法"></a>Jackson算法</h3><p><strong>针对有限非重复、无优先关系的任务集</strong></p>
<p>最早交货期：截止时限最早的首先执行</p>
<p>EDD在最大延迟最小化方面是最优的</p>
<p>EDD不支持任务到达，可通过允许任务在任何时刻到达来扩展EDD</p>
<h4 id="最早截止时限有限-EDF"><a href="#最早截止时限有限-EDF" class="headerlink" title="最早截止时限有限 EDF"></a>最早截止时限有限 EDF</h4><p>允许任务一个个到达</p>
<p>既适用于周期任务，也适合非周期任务</p>
<h3 id="最晚时限优先"><a href="#最晚时限优先" class="headerlink" title="最晚时限优先"></a>最晚时限优先</h3><p>从后往前安排</p>
<h3 id="EDF"><a href="#EDF" class="headerlink" title="EDF*"></a>EDF*</h3><ul>
<li>任何任务都必须在截止时限内完成执行</li>
<li>任何任务完成执行的时间不能晚于其后记任务的最晚开始时间（也就是截止时限-执行时间）</li>
</ul>
<h3 id="优先级反转问题"><a href="#优先级反转问题" class="headerlink" title="优先级反转问题"></a>优先级反转问题</h3><p>​		所谓<strong>优先级翻转问题</strong>（Priority Inversion）即当一个高优先级任务通过信号量机制访问共享资源时，该信号量已被一低优先级任务占有，而这个低优先级任务在访问共享资源时可能又被其它一些中等优先级任务抢先，因此造成高优先级任务被许多具有较低优先级任务阻塞，实时性难以得到保证。</p>
<p>　　例如：有优先级为A、B和C三个任务，优先级A&gt;B&gt;C，任务A，B处于挂起状态，等待某一事件发生，任务C正在运行，此时任务C开始使用某一共享资源S。在使用中，任务A等待事件到来，任务A转为就绪态，因为它比任务C优先级高，所以立即执行。当任务A要使用共享资源S时，由于其正在被任务C使用，因此任务A被挂起，任务C开始运行。如果此时任务B等待事件到来，则任务B转为就绪态。由于任务B优先级比任务C高，因此任务B开始运行，直到其运行完毕，任务C才开始运行。直到任务C释放共享资源S后，任务A才得以执行。在这种情况下，优先级发生了翻转，任务B先于任务A运行。</p>
<h4 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h4><p><strong>优先级天花板（Priority Ceiling）</strong></p>
<p>　　优先级天花板是当任务申请某资源时， 把该任务的优先级提升到可访问这个资源的所有任务中的最高优先级， 这个优先级称为该资源的优先级天花板。这种方法简单易行， 不必进行复杂的判断， 不管任务是否阻塞了高优先级任务的运行， 只要任务访问共享资源都会提升任务的优先级。</p>
<p><strong>优先级继承（Priority Inheritance）</strong></p>
<p>　　优先级继承是当任务A 申请共享资源S 时， 如果S正在被任务C 使用，通过比较任务C 与自身的优先级，如发现任务C 的优先级小于自身的优先级， 则将任务C的优先级提升到自身的优先级， 任务C 释放资源S 后，再恢复任务C 的原优先级。这种方法只在占有资源的低优先级任务阻塞了高优先级任务时才动态的改变任务的优先级，如果过程较复杂， 则需要进行判断。</p>
<h3 id="调度算法都是脆弱的"><a href="#调度算法都是脆弱的" class="headerlink" title="调度算法都是脆弱的"></a>调度算法都是脆弱的</h3><p>如果一个具有固定优先级、执行时间和优先级约束的任务集在固定数量的处理器上</p>
<h2 id="嵌入式系统内核"><a href="#嵌入式系统内核" class="headerlink" title="嵌入式系统内核"></a>嵌入式系统内核</h2><h3 id="mu-C-x2F-OS-II"><a href="#mu-C-x2F-OS-II" class="headerlink" title="$\mu C/OS-II$"></a><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="12.447ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5501.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></g><g data-mml-node="mi" transform="translate(603,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1363,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(1863,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mi" transform="translate(2626,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(3493.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(4493.4,0)"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path></g><g data-mml-node="mi" transform="translate(4997.4,0)"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path></g></g></g></svg></mjx-container></h3><p>可移植，可固化、可扩展、抢占式、实时确定性的多任务内核，适用于微处理器、微控制器和DSP</p>
<p>最多可以管理64个任务，每个任务都有唯一的一个优先级</p>
<p>保留了四个最高优先级和四个最低优先级的任务作为系统任务</p>
<p>实际使用的优先级只有两个：OSTaskCreat和</p>
<p>系统总是创建一个优先级最低的空闲任务，空闲任务把32位计数器加一，统计任务要用</p>
<p>统计任务是倒数第二的任务，提供运行时间统计，统计任务是可选的</p>
<h3 id="任务控制块TCB"><a href="#任务控制块TCB" class="headerlink" title="任务控制块TCB"></a>任务控制块TCB</h3><p>里面有栈指针、描述任务状态的标志位、描述任务优先级的标志位、还有链表指针</p>
<h3 id="空闲TCB链表"><a href="#空闲TCB链表" class="headerlink" title="空闲TCB链表"></a>空闲TCB链表</h3><ul>
<li>所有任务控制块都被放置在任务控制块链表数组OSTCBTbl[]中</li>
<li>初始化的时候所有TCB被连接成空闲的单向链表</li>
<li>一个头指针从链表头开始始终跟踪下一个空闲的指针</li>
<li>当一个任务被创建，头指针指向的TCB给了这个任务，并且加入到使用链表中，头结点向后移动</li>
</ul>
<p>为了方便找到一个任务，提供一个64大小的OSTCBPrioTbl[]数组来帮助快速索引</p>
<h3 id="状态的转换"><a href="#状态的转换" class="headerlink" title="状态的转换"></a>状态的转换</h3><p>调度：找到就绪态里面优先级最高的转为运行态</p>
<h4 id="任务就绪表"><a href="#任务就绪表" class="headerlink" title="任务就绪表"></a>任务就绪表</h4><p>每个任务的就绪态标志放入在就绪表中</p>
<p>就绪表中有两个变量</p>
<p>OSRdyGrp：任务按优先级分组，</p>
<h3 id="进程同步"><a href="#进程同步" class="headerlink" title="进程同步"></a>进程同步</h3><p>PV，邮箱，消息队列</p>
<h2 id="实时内核：存储管理"><a href="#实时内核：存储管理" class="headerlink" title="实时内核：存储管理"></a>实时内核：存储管理</h2><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.4ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3271 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></g><g data-mml-node="mi" transform="translate(603,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1363,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(1863,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mi" transform="translate(2626,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g></g></svg></mjx-container>采用<strong>实模式</strong>存储管理，整个系统只有一个地址空间，每个系统任务都是线程，只有上下文和栈是共享的，其他为独享</p>
<p>malloc和free不能用标准c的，因为具有不确定性，可能不能保证线程安全性、产生内存碎片、占用较多代码</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.4ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3271 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></g><g data-mml-node="mi" transform="translate(603,0)"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1363,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(1863,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"></path></g><g data-mml-node="mi" transform="translate(2626,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g></g></svg></mjx-container>中的malloc和free确定的，分配固定大小的内存块</p>
<p>存储管理</p>
<ul>
<li>µC/OS把连续的大块内存按分区来管理，每个分区包含有整数个大小相同的块</li>
<li>在一个系统中可以有多个内存分区， 用户的应用程序就可以从不同的内存分区 中得到不同大小的内存块，但特定的内存块在释放时必须重新放回它以前所属 于的内存分区</li>
<li>这样就解决了内存碎片</li>
</ul>
<h3 id="Freetos内存管理"><a href="#Freetos内存管理" class="headerlink" title="Freetos内存管理"></a>Freetos内存管理</h3><p>heap_1：应用程序不删除任务和信号量，加载进来跑到死</p>
<p>heap_2：采用一个最佳匹配算法分配内存，分配与需求最接近的内存，并支持内存释放 ，不会自动合并相邻空间，会产生内存碎片</p>
<p>heap_3：简单的调用了标准库malloc()和free()，但是通过暂时挂起调度器保证线程安全</p>
<h3 id="时钟节拍"><a href="#时钟节拍" class="headerlink" title="时钟节拍"></a>时钟节拍</h3><p>一种特殊的中断</p>
<p>提供周期性信号源，用于实现时间延迟和确认超时</p>
<p>节拍率应在10到100Hz之间，时钟节拍率越高，系统的额外负荷就越重</p>
<h3 id="板级支持包和引导加载"><a href="#板级支持包和引导加载" class="headerlink" title="板级支持包和引导加载"></a>板级支持包和引导加载</h3><h1 id="期末复习"><a href="#期末复习" class="headerlink" title="期末复习"></a>期末复习</h1><h2 id="嵌入式系统概述"><a href="#嵌入式系统概述" class="headerlink" title="嵌入式系统概述"></a>嵌入式系统概述</h2><h3 id="定义与术语"><a href="#定义与术语" class="headerlink" title="定义与术语"></a>定义与术语</h3><h4 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h4><ul>
<li>泛在计算（任何时间、任何地点）</li>
<li>不可见计算机（计算机被集成到物件中）</li>
<li>普适计算（计算设备对日常生活的渗透）</li>
<li>环境智能（未来家庭或智能楼宇中的通信技术）</li>
<li>CPS信息物理系统，计算进程和物理进程的集成，强调嵌入式系统与物理学深度结合</li>
<li>人机物融合系统</li>
<li>深度融合各类信息技术</li>
<li>无线感知网络，分布着的自动装置组成的传感器感知计算网络</li>
<li></li>
</ul>
<h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>以应用为中心，以计算机技术为基础，软硬件可裁剪，适用于应用系统对功能、可靠性、成本、体积、功耗、可伸缩性、容错有严格要求的专用计算机</p>
<h3 id="嵌入式系统组成"><a href="#嵌入式系统组成" class="headerlink" title="嵌入式系统组成"></a>嵌入式系统组成</h3><ul>
<li>嵌入式硬件<ul>
<li>以微处理器为核心，集成存储器和系统专用的输入输出设备</li>
</ul>
</li>
<li>嵌入式软件<ul>
<li>软件包括：初始化代码及驱动、嵌入式操作系统和应用程序</li>
</ul>
</li>
</ul>
<h2 id="嵌入式系统设计方法"><a href="#嵌入式系统设计方法" class="headerlink" title="嵌入式系统设计方法"></a>嵌入式系统设计方法</h2><h3 id="嵌入式系统设计所面临的挑战"><a href="#嵌入式系统设计所面临的挑战" class="headerlink" title="嵌入式系统设计所面临的挑战"></a>嵌入式系统设计所面临的挑战</h3><ul>
<li>需要多少硬件</li>
<li>如何满足时限要求，如何处理多项功能在实践上的协调一致性</li>
<li>如何降低系统的功耗</li>
<li>如何保证系统可升级</li>
<li>如何保证系统可靠的工作</li>
</ul>
<h3 id="嵌入式系统设计目标"><a href="#嵌入式系统设计目标" class="headerlink" title="嵌入式系统设计目标"></a>嵌入式系统设计目标</h3><ul>
<li>成本</li>
<li>性能</li>
<li>功耗</li>
<li>尺寸</li>
<li>可伸缩性和可重用性</li>
<li>容错</li>
</ul>
<h3 id="传统嵌入式系统设计过程"><a href="#传统嵌入式系统设计过程" class="headerlink" title="传统嵌入式系统设计过程"></a>传统嵌入式系统设计过程</h3><p>需求分析、规格说明、体系结构、构建设计、系统集成</p>
<ul>
<li>基本特征<ul>
<li>系统在一开始就被划分为软件和硬件两大部分</li>
<li>软件和硬件独立开发设计</li>
<li>一般硬件优先</li>
</ul>
</li>
<li>隐含的问题<ul>
<li>软硬件之间的交互收到很大限制<ul>
<li>凭经验划分软硬件</li>
<li>软硬件之间的相互影响难以评估</li>
</ul>
</li>
<li>系统集成相对滞后 NRE</li>
</ul>
</li>
<li>导致<ul>
<li>设计质量差</li>
<li>设计难修改</li>
<li>研制周期不能有效保障</li>
</ul>
</li>
</ul>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4>
        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>John Doe</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://blog.lsmcloud.top/2023/09/04/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F/">http://blog.lsmcloud.top/2023/09/04/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F/"># 嵌入式系统</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2023/09/05/%E4%BA%BA%E6%9C%BA%E4%BA%A4%E4%BA%92/">人机交互</a>
            
            
            <a class="next" rel="next" href="/2023/08/16/%E5%AD%A6%E4%B9%A0next-js/">学习next.js</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© John Doe | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>